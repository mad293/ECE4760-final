
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<!-- HTML code adapted from http://people.ece.cornell.edu/land/courses/ece4760/FinalProjects/f2013/jjb284_cc697_adk75/jjb284_cc697_adk75/index.html

The Bat Hat -->

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta http-equiv="Content-Language" content="en-us">
<title>ECE 4760: The Bat Hat</title>
<link rel="stylesheet" type="text/css" media="all" href="./stylesheets/cornell.css">
<link rel="stylesheet" type="text/css" media="all" href="./stylesheets/cornell2.css">
<link rel="stylesheet" type="text/css" media="all" href="./stylesheets/main.css">
<meta name="author" content="Maxwell Dergosits Richard Branciforte">
<meta name="copyright" content="Copyright (c) 2014 Maxwell Dergosits Richard Branciforte">
<meta name="description" content="A glove that make a midi stream">
<meta name="keywords" content="MIDI, accelometer, gyroscope, serial, microcontroller, ECE, 4760, Dergosits, Branciforte, Cornell">
</head>
<body>

<div id="header">
  <!-- The following div contains the Cornell University logo and search link -->
  <div id="cu-identity"> 
		<div id="cu-logo"> 
			<a href="http://www.ece.cornell.edu"><img src="./Images/cu_logo.gif" alt="Cornell University" width="340" height="75" border="0" /></a> 
		</div> 
  </div>
  
  <div class="linklist"> <a name="top"></a> </div>
  <!-- The search-form div contains a form that allows the user to search 
		either pages or people within cornell.edu directly from the banner.	-->
  <div id="search-form">
    <form action="http://www.cornell.edu/search/" method="get" enctype="application/x-www-form-urlencoded">
      <div id="search-input">
        <label for="search-form-query">SEARCH:</label>
        <input type="text" id="search-form-query" name="q" value="" size="20">
        <input type="submit" id="search-form-submit" name="submit" value="go">
      </div>
      <div id="search-filters">
        <input type="radio" id="search-filters1" name="tab" value="" checked="checked">
        <label for="search-filters1">Pages</label>
        <input type="radio" id="search-filters2" name="tab" value="people">
        <label for="search-filters2">People</label>
        <a href="http://www.cornell.edu/search/">more options</a> </div>
    </form>
  </div>
</div>

<!-- The mainnav div contains links to jump to prominent sections in webpage -->
<div id="mainnav">
  <ul>
    <li><a href="#design">High&nbsp;Level&nbsp;Design</a></li>
    <li><a href="#hardware">Hardware</a></li>
    <li><a href="#software">Software</a></li>
    <li><a href="#results">Results</a></li>
    <li><a href="#conclusions">Conclusions</a></li>
    <li><a href="#appendices">Appendices</a></li>
  </ul>
</div>
<!-- end mainnav -->
<!-- end header -->
<div id="sectiontitle">
  <h4><a href="http://people.ece.cornell.edu/land/courses/ece4760/">ECE 4760</a>: <a href="http://people.ece.cornell.edu/land/courses/ece4760/FinalProjects/">Final Project</a></h4>
  <h1>Gesture based MIDI glove</h1>
  <h2>Motion driven MIDI instrument</h2>
  <h3>Maxwell Dergosits(<a href="mailto:mad293@cornell.edu">mad293@cornell.edu</a>)</h3>
  <h3>Richard Branciforte (<a href="mailto:rjb297@cornell.edu">rjb297@cornell.edu</a>)</h3>
</div>

<div id="wrapper">
  <div id="content">
    <div id="maincontent" class="hub">
	
	<br><br>
	<div class="image"><a href="./Images/teamPicture.jpg"><img src="./Images/teamPicture.jpg" width="350" height="300"></a>
			<p class="caption">Andrew, Jeff, Clifford, and The Bat Hat.</p>
		</div>
      
		<h2>Introduction &nbsp;&nbsp;&nbsp;<font size="-1"><strong><a href="#top">top</a></strong></font></h2>
		<div id="introblurb">
		<div id="pullquote">
		  <p class="quote">"A playable MIDI glove controlled by the motion of your hand."</p>
		  <p class="caption">-Project Sound Bite</p>
</div>
		
		
		  
		<div class="image"><a href="./Images/Ping-2.png"><img src="./Images/Ping-2.png" alt="Ultrasonic echo illustration" width="500" height="205"></a>
		    <p class="caption">An illustration of an ultrasonic pulse echoing off an obstacle and returning to a receiver.<br>Source: <a href="http://learn.parallax.com/KickStart/28015">http://learn.parallax.com/KickStart/28015</a></p>
		</div>
	  <p>We designed a MIDI glbve </p>
      <div class="linklist"> <a name="design"></a>
	<h2>High Level Design &nbsp;&nbsp;&nbsp;<font size="-1"><strong><a href="#top">top</a></strong></font></h2>
        <h4>Rationale and Source of Our Project Idea</h4>
			
		<div class="linklist"> <a name="math"></a>
		<h4>Background Math</h4>
			
			<ul>
				<li>Approximate speed of sound in air: v = 331.4 + 0.6T, where T is the temperature in Â°C</li>
				<li>Round-trip distance = v*t, where t is the time for the pulse to return to the sensor</li>
				<li>Object distance (approximate) = 39*(Round-trip distance)/2 &nbsp inches</li>
			</ul>
			
		<h4>Logical Structure</h4>
			
			<div class="image"><a href="./Images/SystemStates.png"><img src="./Images/SystemStates.png" width="302" height="395"></a>
			    <p class="caption">Diagram of four main hardware/software system states.</p>
			</div>
			
			<div class="linklist"> <a name="receiver"></a>
			<div class="image"><a href="./Images/receiver.bmp"><img src="./Images/receiver.bmp" width="400" height="300"/></a>
				<p class="caption">Scope trace of the initial pulse and echo, as seen at the receiver.  The top trace is the received signal after amplification and filtering.  The bottom trace is the trigger output, which is fed into the microcontroller.</p>
			</div>
		<h4>Hardware and Software Tradeoffs</h4>
			
        <h4>Standards</h4>
			
		<h4>Relevant Patents and Copyrights</h4>
			
			
       <div class="linklist"> <a name="hardware"></a>
        <h2>Hardware &nbsp;&nbsp;&nbsp;<font size="-1"><strong><a href="#top">top</a></strong></font></h2>
        
		<h4>Overview</h4>
		
		<div class="image"><a href="./Images/topView.jpg"><img src="./Images/topView.jpg" width="350" height="475"></a>
			<p class="caption">Overhead view of The Bat Hat, showing the full hardware layout.</p>
		</div>
		
		<h4>Transmitter</h4>	
		
		<div class="image"><a href="./Images/TxBlock.jpg"><img src="./Images/TxBlock.jpg" width="624" height="50"></a>
			<p class="caption">Block diagram of the transmitter circuitry.</p>
		</div>
		
		
		
		
		
		
		<div class="image"><a href="./Images/transmitter.bmp"><img src="./Images/transmitter.bmp" width="400" height="300"></a>
			<p class="caption">Transmitter pulse created when Port B.2 is high.</p>
		</div>	
		
		
		
		<div class="image"><a href="./Images/40k.bmp"><img src="./Images/40k.bmp" width="400" height="300"></a>
			<p class="caption">40 kHz waveform used to drive transmitter.</p>
		</div>
		
		<h4>Receiver</h4>
		
		<div class="image"><a href="./Images/RxBlock.jpg"><img src="./Images/RxBlock.jpg" width="624" height="120"></a>
			<p class="caption">Block diagram of the receiver circuitry.</p>
		</div>
		
		
		<div class="image"><a href="./Images/raw_receive.bmp"><img src="./Images/raw_receive.bmp" width="400" height="300"></a>
			<p class="caption">Raw signal at the output of the ultrasonic receiver.</p>
		</div>
		<div class="image"><a href="./Images/filtered_receive.bmp"><img src="./Images/filtered_receive.bmp" width="400" height="300"></a>
			<p class="caption">Filtered output of the ultrasonic receiver.</p>
		</div>
		
		
		
		
		
		
		
		
        
		<div class="image"><a href="./Images/peak_detector.bmp"><img src="./Images/peak_detector.bmp" width="400" height="300"></a>
			<p class="caption">Output signal from the peak detector.</p>
		</div>
		
		</u>
        

		</u>
		

		</u>
		

        </u>
        
		
		<h4>Haptic Feedback Circuitry</h4>
		
		
		<h4>Trials and Tests</h4>
		
		
		</div>
		
		
      <div class="linklist"> <a name="software"></a>
        <h2>Software &nbsp;&nbsp;&nbsp;<font size="-1"><strong><a href="#top">top</a></strong></font></h2>       
		
		<h4>Overview</h4>
		
		
		
		
		
		
		
		
		
		
		<h4>Function Listing</h4>
		
		
		
		
		</div>
		</p>
		<div class="image"><a href="./Images/echo.bmp"><img src="./Images/echo.bmp"></a></img>
			<p class="caption">Scope trace showing the far field case, in which the transmitter/receiver is far enough from an obstacle to see two pulses, the transmitted pulse and the echo.  Because the transmitter's oscillator circuit takes time to ramp up/down, the actual transmitted pulse is longer than the pulse coming from the microcontroller.</p>
		</div>
		</p>
				
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		<div class="image"><a href="./Images/EXT1.png"><img src="./Images/EXT1.png" width="540" height="310"></a>
			<p class="caption">State transition diagram of the INT1 external interrupt ISR.</p>
		</div>
		
		
		
		
		
		<h4>Illustration of PWM Cases</h4>
		
		<div class="image"><a href="./Images/near_field_pwm.bmp"><img src="./Images/near_field_pwm.bmp" width="400" height="300"></a>
			<p class="caption">Near field case, with rapid PWM.</p>
		</div>
		<div class="image"><a href="./Images/moderate_dist_pwm.bmp"><img src="./Images/moderate_dist_pwm.bmp" width="400" height="300"></a>
			<p class="caption">Moderate distance case, showing an echo and moderate PWM.</p>
		</div>
		<div class="image"><a href="./Images/far_dist_pwm.bmp"><img src="./Images/far_dist_pwm.bmp" width="400" height="300"></a>
			<p class="caption">Far distance case, showing an echo and low PWM.</p>
		</div>
		
		<h4>Trials and Tests</h4>
		
		
		</div>
      
      <div class="linklist"> <a name="results"></a>
        <h2>Results &nbsp;&nbsp;&nbsp;<font size="-1"><strong><a href="#top">top</a></strong></font></h2>
		
		<h4>Speed of Execution</h4>
		
			
		<h4>Accuracy</h4>
			
			
		<h4>Safety</h4>
		
		
		<h4>Interference with Other People's Designs</h4>
		
			
		<h4>Usability</h4>
		
      
      <div class="linklist"> <a name="conclusions"></a>
        <h2>Conclusions &nbsp;&nbsp;&nbsp;<font size="-1"><strong><a href="#top">top</a></strong></font></h2>
        
        <h4>Results vs. Expectations</h4>
		
		
		<h4>Conformance to Standards</h4>
		
		
		<h4>Intellectual Property Considerations</h4>
		
		
		<h4>Ethical Considerations</h4>
		
			
		<h4>Legal Considerations</h4>
		
		
      <div class="linklist"> <a name="appendices"></a>
        <h2>Appendices &nbsp;&nbsp;&nbsp;<font size="-1"><strong><a href="#top">top</a></strong></font></h2>
        <h3>A. Program Listing</h3>
		<ul>
		<li><a href=".\src\TheBatHat.c">TheBatHat.c</a> (6 KB)</li>
		<li><a href=".\src\uart.c">uart.c</a> (5 KB)</li>
		<li><a href=".\src\uart.h">uart.h</a> (1 KB)</li>		
		</ul>
		
		
		<div class="linklist"> <a name="AppB"></a>
		<h3>B. Schematics</h3>
		
		<div class="image"><a href="./Images/TransmitterSchematic.bmp"><img src="./Images/TransmitterSchematic.bmp" width="700" height="200"></a>
			<p class="caption">Schematic of the ultrasonic transmitter circuitry, including 555-timer, flip-flop for dividing the frequency, and operational amplifiers.</p>
		</div>
		
		<div class="image"><a href="./Images/receiverSchematic.bmp"><img src="./Images/receiverSchematic.bmp" width="700" height="200"></a>
			<p class="caption">Schematic of the ultrasonic receiver circuitry, including the filters, amplifiers, peak detector, and Schmitt trigger.</p>
		</div>
		
		<div class="image"><a href="./Images/optoisolator.png"><img src="./Images/optoisolator.png" width="380" height="284"></a>
			<p class="caption">The optoisolator circuit used to separate the haptic feedback motor from the microcontroller.<br>Source: <a href="http://people.ece.cornell.edu/land/courses/ece4760/labs/f2013/lab4.html">ECE 4760: Lab 4, Fall 2013</a></p>
		</div>
		
		<h3>C. Parts List and Costs</h3>
		<table width="100%" border="1">
		<thead>
			<tr>
				<th>Part</th>
				<th>Vendor</th>
				<th>Cost/Unit</th>
				<th>Quantity</th>
				<th>Total Cost</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td>Atmega 1284p</td>
				<td>Lab Stock</td>
				<td>$5</td>
				<td>1</td>
				<td>$5</td>
			</tr>
			<tr>
				<td><a href="http://www.nbb.cornell.edu/neurobio/land/PROJECTS/Protoboard476/index.html">Custom PCB</a></td>
				<td>Lab Stock</td>
				<td>$4</td>
				<td>1</td>
				<td>$4</td>
			</tr>
			<tr>
				<td>LSM9DS0 Breakout board (<a href="https://www.sparkfun.com/products/12636">Part #12636</a>)</td>
				<td>Sparkfun Electronics</td>
				<td>$29.95</td>
				<td>1</td>
				<td>$29.95</td>
			</tr>
			<tr>
				<td>Flex Resistor (<a href="https://www.sparkfun.com/products/10264">Part #10264</a>)</td>
				<td>Sparkfun Electronics</td>
				<td>$7.95</td>
				<td>2</td>
				<td>$15.90</td>
			</tr>
				<td>Header Pin</td>
				<td>Lab Stock</td>
				<td>$0.05</td>
				<td>16 </td>
				<td>$0.80</td>
			<tr>
				<td>Wires, Resistors, Capacitors</td>
				<td>Lab Stock</td>
				<td>$0</td>
				<td>Many</td>
				<td><u>$0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</u></td>
			</tr>
			<tr>
				<td></td><td></td><td></td>
				<td><b>TOTAL:</b></td>
				<td><b>$38.62</b></td>
			</tr>
		</tbody>
		</table>
		
        <h3>D. Division of Labor</h3>
		
		</div>

        
           </div>
    <!-- end maincontent -->
  </div>

  <!-- content out -->
  <hr>
  <!-- footer in -->
  <div id="footerwrap">
    <div id="footer">
      <div id="copyright">
        <div class="copyright">&copy;2013 Jeff Buswell, Clifford Chou, Andrew Knauss</div>
        <div class="copyright">Layout &copy;2010 Cornell University</div>
      </div>
    </div>
    <!-- end footer -->
  </div>
  <!-- end footerwrap -->
  <!-- footer out -->
</div>
<!-- end wrapper -->


<embed type="application/x-shockwave-flash" width="0" height="0"></body></html>
